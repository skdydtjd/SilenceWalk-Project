# SilenceWalk-Project
# 2025-1 캡스톤 디자인 프로젝트 Script 파일
3D Horror, Escape, Puzzle Game

# 개발 기간

2025.03.18 ~ 2025.06.10

# 개발 인원

1인 개발

# 개발 환경

Unity6 (6000.0.32f1), URP, Windows, C#

# 개발한 부분

카메라 연출, 음향 효과, 플레이어 이동 및 애니메이션 적용, 맵 배치, 적 애니메이션 편집, 적 AI(배회, 추적, 리턴) 및 능력, 맵 내의 각 부분별 퍼즐, 세이브 시스템 등 전반적인 게임 시스템

(개발 중 어떻게 구현할지 막히는 부분이 생기면 기본적인 뼈대를 얻기 위해 ChatGPT, Unity ScriptingAPI 등을 활용함)

그래픽, 효과음 리소스 - 무료 배포된 에셋 수집 및 활용

(에셋에 포함되어있던 스크립트를 프로젝트에 맞게 수정했을 경우 Update Script From External Asset)

# 초기 개발 배경

리틀 나이트메어, DARQ, Limbo와 같이 미지의 장소에 대한 탐험과 플레이 진행에 따라 세계관의 흐름, 스토리를 알아가는 모험심이 강하고 심적으로 긴장된 상태에서 플레이할 수 있는 재미를 느낄 게임을 만들어보고자 했다.

# 게임 진행

탐험을 하며 현재 일어나는 상황을 파악하고 최종적으로 베이스캠프와 같이 안전한 장소를 찾아 정착할 수 있도록하는 것을 최종목표로 한다.

플레이어는 미지의 장소에서 깨어나 맵을 탐험하며 각 방에 배치된 괴생명체를 피하고 문을 열수 있도록하는 숨겨진 기믹을 풀어나간다. 
4가지 기본 스테이지를 전부 클리어하면 보스전(스피드런)이 시작되고 종점에서 보스를 처리한 뒤 배경이 야외로 변경되며 개발한 범위인 건물안에서 진행되는 챕터가 종료되게된다. 

# 개발 당시 어려웠던 점

__1. 적 AI의 허점__

이번 게임의 적 AI는 유니티 내의 NavMesh 컴포넌트를 이용하여 구현했다. 

이 때 NavSurface의 연결이 끊어진 지형의 경우 NavLink를 연결하여 해결했으나 NavMesh의 특성상 다익스트라 알고리즘을 기반으로 되어있기 때문에 배회 중 플레이어를 추적하는 상태로 바뀌면 배회 당시 Link로 연결되어있는 지점을 거쳐가는 것을 최적 경로로 판단하여 추적 도중 Link를 타고 들어갔다 나오는 버벅이는 현상이 가끔 발생했다.
이를 통해 Terrain지형이 아닌 TileMap지형에서는 NavMesh가 적합하지 않을수도 있다는 것을 배웠다.

또한 이는 Link의 가중치를 아무리 무겁게 잡아도 발생해서 NavMesh를 활용하지 않고 구현하는 등 추후 과제로 자리잡게 되었다.

---------------------------------------------------------------------------------------------------

__2. Shadow Atlas라는 텍스처에 여러 광원의 shadow map을 실시간 그림자를 렌더링할 때 문제__

맵을 구성하는 에셋을 활용할 때 텍스쳐 해상도를 넘어서는 그림자를 생성하여 이에 따라 그림자 해상도를 강제로 낮춘다는 Warning이 떴다.

Editor에서는 실행에 문제없었지만 빌드가 안되는 문제가 발생하여 에러도 아닌 처음보는 경고로 빌드문제에 직면하여 고생을 좀 겪었다.
Point Light, Spot Light 등 그림자를 생성하는데 비중을 많이 필요로하는 광원들의 Quality를 high에서 Low로 낮추거나 그림자를 아예 생성하지 않게 하기, Shadow Atlas라는 텍스처 해상도의 범위를 높이기 등으로 텍스쳐 해상도를 넘어서지않게 문제를 해결했다.

이를 통해 많은 광원이 있을 경우 모든 광원이 꼭 그림자를 생성해야할 필요가 없음을 느꼈다.

-----------------------------------------------------------------------------------------------------

__3. 저장 후 불러오기를 진행할 떄 불러온 값을 재검사하지 않을 시의 문제__

각 스테이지 클리어 판정 여부를 저장할 때 단순한 bool형이 아닌 열쇠 갯수로 클리어 여부를 결정하는 스테이지가 있었다.

기존 bool형의 경우 불러온 뒤 인게임 적용에 문제가 없었으나 int형으로 판단하면 데이터를 불러온 뒤 클리어 후 잠금해제되어 있어야 할 문이 그대로 잠겨있는 상황이 발생했다.

데이터를 불러온 뒤 저장되어있던 값으로 다시 한번 클리어 조건을 검사를 진행해주는 코드를 게임이 리로드되는 과정 중에 이뤄지게끔 추가 해줌으로서 문제를 해결했다.
나아가 각 문(Door)의 동작을 담당하는 스크립트의 Start() 구문 안에도 2중으로 검사가 되게 함으로서 안전하게 값을 받을 수 있도록 했다.

이를 통해 불러오는 과정에서 조건을 다시 한번 확인을 해주는 절차가 필요함을 알게되었으며 안전하게 씬이 시작될 때마다 검사해주는 방안 또한 생각할 수 있었다.

-------------------------------------------------------------------------------------------------------

__4. 맵을 구성하는 Asset을 활용하던 중 플레이어 시야를 가리는 문제__

맵을 구성하는 Asset을 활용하여 맵 형태를 재구성 및 인게임 내에서 플레이할 때 벽이 카메라와 플레이어의 사이 공간을 막아버려 카메라에 캐릭터가 보이지 않게 되는 상황이 발생했다.

따라서 카메라에서 플레이어로 Ray를 쏴서 도중 Ray에 다른 물체가 감지되면 그 물체의 Material를 반투명하게 만들었으며 몰입감을 해치지않도록 플레이어와 카메라가 가까울 경우 맵 외부가 최대한 보이지 않도록 FoV값을 변경하여 줌 효과를 줘보았다. 

이 과정 중 에셋이 카메라에 보이는 시야 범위에 따라 렌더링이 뚜렷하게 또는 흐리게 구현되는 LOD Group이란 것을 사용하고 있어 기본적인 Material과 다르게 구현되어 있는 것을 처음 알게 되었고
이를 해결하기위해 foreach문을 중복 사용하여 각 LOD Group 내에 있는 각 Material에 접근이 가능하도록 하여 새로 만든 반투명 Meterial로 교체했다가 사이 공간에 있는 물체가 사라지면 다시 원상복구가 되도록 구현해 보았다.

# 플레이 링크

https://play.unity.com/en/games/7b4b2685-3ecb-4f8d-bb34-e79b9eabbd38/silencewalk-20250706
